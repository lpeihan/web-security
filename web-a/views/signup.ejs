
<!DOCTYPE html>
<html>
  <head>
    <%- include('partials/head') %> 
  </head>

  <body>
    <%- include('partials/nav') %>

    <div class="container">    
      <form id="form01" role="form" class="form-horizontal">
        <div class="form-group">
          <label for="username" class="col-sm-2 control-label">Username:</label>
          <div class="col-sm-3">
              <input name="username" id="username" type="text" class="form-control">
          </div>
        </div>
        <div class="form-group">
          <label for="password" class="col-sm-2 control-label">Password:</label>
          <div class="col-sm-3">
              <input id="password" name="password" type="password" class="form-control">
          </div>
        </div>

        <div class="form-group">
          <label class="col-sm-2 control-label"></label>
          <div class="col-sm-3">
            <button type="button" class="btn btn-success" onclick="onSubmit()">Signup</button>
            &nbsp;
            <a href="/login">Or Login</a>
          </div>
        </div>
      </form>
  </body>

  <script>
    const onSubmit = async () => {
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;

      const res = await axios({
        url: '/api/users/signup',
        method: 'post',
        data: {
          username,
          password,
        }
      });

      if (res.data.code === 1) {
        location.href = '/login';
      }
    }
  </script>

  <%- include('partials/script') %>
</html>